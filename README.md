# HostkeyResellerMod
# Модуль для реселлеров

## Назначение
Модуль ```HostkeyResellerMod V 1.0``` предназначен для перепродажи серверов Hostkey реселлерами.

## Развертывание
1. Загрузите проект при помощи git.
2. Скопируйте папку ```modules``` в корень биллинга.
## Настройка
1. На странице ```System Settings -> General Settings -> Addon Modules``` найдите аддон ```HOSTKEY VPS/Dedicated``` и активируйте его.
2. Заполните поля ```API Url``` и ```API key```, для чего получите ключ у Hostkey (```Profile -> API keys```).
3. Установите необходимые разрешения.
4. Сохраните.
## Загрузка информации с Hostkey
Можно использовать один из вариантов:
1. Со страницы биллинга используйте в главном меню пункт ```Addons -> HOSTKEY VPS/Dedicated```. На открывшейся странице нажмите кнопку ```Activate products```.
2. В консоли в корне биллинга запустите команду ```php modules/addons/hostkeyresellermod/cron.php```.
Здесь же можно и удалить информацию о серверах Hostkey, используя кнопку ```Remove Hostkey products```.

В любом случае информация о доступных пресетах будет запрошена с сервера Hostkey и загружена в БД биллинга, после чего она появится на странице пользователя ```Услуги -> Заказать новую услугу```.

**Примечание:** Для первоначальной загрузки предпочтительнее использовать второй способ, поскольку при большом объеме информации страница может завершиться с кодом ```504 Gateway Timeout```.
## Заказ пресета при помощи модуля HostkeyResellerMod
При оплате пресета в биллинге модуль производит его заказ в Hostkey. После завершения физической инсталляции пресета при просмотре пресета в биллинге производится связывание физического пресета с биллингом и становится доступной панель для работы с пресетом.
